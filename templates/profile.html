{% extends "base.html" %}

{% block title %}Mon Profil - {{ club.name }}{% endblock %}

{% block content %}
<main class="container page-transition">

    <section class="fade-in" style="text-align: center; margin: 3rem 0;">
        <h1 style="font-size: 3rem; font-weight: 800; margin-bottom: 1rem;">
            Mon <span style="color: var(--color-primary);">Profil</span>
        </h1>
        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto;">
            G√©rez les informations de votre club et consultez votre historique.
        </p>
    </section>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-error" style="background: rgba(0,255,127,0.1); color: var(--status-available); border-color: rgba(0,255,127,0.2); margin-bottom: 2rem;">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
        
        <section class="slide-up">
            <div class="card">
                <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 2rem;">üèüÔ∏è Informations du Club</h2>
                
                <form method="post" action="{{ url_for('profile') }}">
                    <div class="form-group">
                        <label class="form-label" for="club_name">Nom du Club</label>
                        <input type="text" id="club_name" name="club_name" class="form-input" value="{{ club.name }}">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email du Secr√©taire (non modifiable)</label>
                        <input type="email" class="form-input" value="{{ club.email }}" disabled>
                    </div>

                    <button type="submit" class="btn" style="width: 100%; margin-top: 1rem;">
                        Sauvegarder les modifications üíæ
                    </button>
                </form>
            </div>
        </section>

        <section class="slide-up-delay-1" style="position: sticky; top: 120px;">
            <div class="card" style="margin-bottom: 2rem;">
                <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1.5rem;">üìä Statistiques</h3>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: rgba(255,107,0,0.05); border-radius: 8px;">
                        <span style="color: var(--text-secondary);">Rang actuel</span>
                        <span style="color: var(--color-primary); font-weight: 700; font-size: 1.1rem;">#{{ rank }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: rgba(0,255,127,0.05); border-radius: 8px;">
                        <span style="color: var(--text-secondary);">Solde de points</span>
                        <span style="color: var(--status-available); font-weight: 700; font-size: 1.1rem;">{{ club.points }}</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1.5rem;">üïí Historique des R√©servations</h3>
                <div style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 300px; overflow-y: auto;">
                    {% for item in history %}
                        <div style="padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid var(--color-primary);">
                            <div style="font-weight: 600; font-size: 0.9rem; margin-bottom: 0.25rem;">
                                {{ item.name }}
                            </div>
                            <div style="font-size: 0.8rem; color: var(--text-secondary);">
                                {{ item.places }} place(s) | {{ item.date }}
                            </div>
                        </div>
                    {% else %}
                        <p style="font-size: 0.9rem; color: var(--text-secondary); text-align: center;">Aucune r√©servation effectu√©e.</p>
                    {% endfor %}
                </div>
            </div>
        </section>
    </div>
</main>
{% endblock %}